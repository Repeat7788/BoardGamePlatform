<!doctype html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>äººé¡åœ–æ¡ŒéŠã€Œæœªä¾†å°èˆªã€æªåœ˜ç¥å™¨</title>
  <style>
    body { background: linear-gradient(135deg, #0f4392 0%, #6393d1 100%);
      margin: 0; padding: 0;
      font-family: 'Noto Sans TC', 'Microsoft JhengHei', sans-serif;
      min-height: 100vh; }
    .container { max-width:900px; width:100%; margin:2rem auto;
      background:#fff; border-radius:20px; box-shadow:0 20px 60px #0004; overflow:hidden;}
    .header { background: linear-gradient(135deg,#0f4392 0%,#6393d1 100%);
      color:#fff;padding:2.5rem 2rem;}
    .header-content{ display:flex; align-items:center; justify-content:center; gap:2.5rem; margin-bottom:1.5rem;}
    .logo-image { width:120px; height:120px; object-fit:cover; border-radius:14px; box-shadow:0 2px 8px #0f43924d; }
    .title-section h1 { margin:0;font-size:2rem;font-weight:700;text-align:left;}
    .description { margin:0 0 1rem 0; font-size:1rem; opacity:.95; max-width:600px; margin-left:auto; margin-right:auto;
      line-height:1.6; background:rgba(255,255,255,0.1); padding:1rem 1.5rem; border-radius:12px;}
    .subtitle { margin:0; font-size:.98rem; opacity:.88; font-style:italic;}
    .updatetime{margin-top:1.2em;font-size:.98em;color:#fff;opacity:.94;font-weight:600;}
    .content {padding:2rem;}
    .process-section{background:#fff;border-radius:16px;padding:2rem;margin-bottom:2rem;border:2px solid #eeba2b;box-shadow:0 4px 20px #eeba2b26;}
    .process-title{color:#112947;font-size:1.5rem;font-weight:700;text-align:center;margin:0 0 1.5rem 0;}
    .process-steps{display:flex;justify-content:space-between;align-items:stretch;gap:1rem;}
    .step{flex:1;display:flex;flex-direction:column;align-items:center;text-align:center;background:#f8e185;padding:1.5rem 1rem;border-radius:12px;border:1px solid #eeba2b;}
    .step-number{background:#0f4392;color:#fff;width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.25rem;margin-bottom:1rem;}
    .step-content h3{color:#112947;font-size:1.1rem;font-weight:600;margin:0 0 0.75rem 0;}
    .step-content p{color:#112947;font-size:0.9rem;line-height:1.4;margin:0;opacity:.8;}
    .course-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:2rem;}
    .course-card{background:#fff;border-radius:12px;padding:1.5rem;border:2px solid #b6ccd7;transition:all 0.3s;}
    .course-card:hover{transform:translateY(-4px);box-shadow:0 8px 20px #0f439233;border-color:#6393d1;}
    .course-time{font-size:1.25rem;font-weight:700;color:#112947;margin-bottom:1rem;display:flex;align-items:center;gap:0.5rem;}
    .participant-count{display:flex;align-items:center;gap:0.5rem;margin-bottom:1rem;font-size:1rem;color:#112947;}
    .count-number{font-size:1.5rem;font-weight:700;color:#0f4392;}
    .status-badge{display:inline-block;padding:0.5rem 1rem;border-radius:20px;font-size:0.875rem;font-weight:600;margin-bottom:1rem;}
    .status-confirmed{background:#6393d1;color:#fff;}
    .status-pending{background:#b6ccd7;color:#112947;}
    .register-btn{width:100%;padding:0.75rem;background:linear-gradient(135deg,#eeba2b 0%,#f8e185 100%);color:#112947;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;}
    .register-btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px #eeba2b66;}
    .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:1000;justify-content:center;align-items:center;}
    .modal.active{display:flex;}
    .modal-content{background:#fff;border-radius:16px;padding:2rem;max-width:400px;width:90%;box-shadow:0 20px 60px #0000004d;display:flex;flex-direction:column;align-items:center;}
    .modal-content form{width:100%;display:flex;flex-direction:column;align-items:center;}
    .modal-form-group{width:100%;max-width:260px;margin:0 auto 1.1em auto;}
    .modal-form-label{display:block;margin-bottom:0.35em;font-weight:600;color:#112947;font-size:1em;text-align:left;}
    .modal-form-input{width:100%;padding:0.65em;border:2px solid #b6ccd7;border-radius:7px;font-size:1em;box-sizing:border-box;}
    .modal-form-input:focus{outline:none;border-color:#6393d1;}
    .modal-actions{display:flex;gap:1rem;margin-top:1.5rem;}
    .modal-btn{flex:1;padding:0.75rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;}
    .modal-btn-primary{background:linear-gradient(135deg,#eeba2b 0%,#f8e185 100%);color:#112947;}
    .modal-btn-secondary{background:#b6ccd7;color:#112947;}
    .toast{position:fixed;bottom:2rem;right:2rem;background:#fff;padding:1rem 1.5rem;border-radius:8px;box-shadow:0 4px 12px #00000026;display:none;align-items:center;gap:0.75rem;z-index:2000;}
    .toast.active{display:flex;}
    .toast.success{border-left:4px solid #48bb78;}
    .toast.error{border-left:4px solid #f56565;}
  </style>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="header-content">
        <img class="logo-image" src="https://raw.githubusercontent.com/Repeat7788/BoardGamePlatform/main/for_logo.png" alt="æœªä¾†å°èˆªå•†å“ç…§">
        <div class="title-section">
          <h1 id="pageTitle">äººé¡åœ–æ¡ŒéŠã€Œæœªä¾†å°èˆªã€<br><span style="letter-spacing:.2em;">æªåœ˜ç¥å™¨</span></h1>
        </div>
      </div>
      <p class="description" id="pageDescription">
        å…¨çƒé¦–æ¬¾çµåˆäººé¡åœ–åŸç†çš„äº’å‹•æ¡ŒéŠã€‚ã€Šæœªä¾†å°èˆªã€‹è®“ä½ é€ééŠæˆ²è‡ªç„¶ç†è§£äººé¡åœ–ã€å­¸æœƒé¸æ“‡ã€ç·´ç¿’æ±ºç­–æµç¨‹ã€‚<br>
        é‚€ä½ ä¸€èµ·æªåœ˜é«”é©—ï¼Œå¦‚æœä½ é‚„æ²’åƒåŠ éï¼Œåƒè¬ä¸è¦éŒ¯éå…¨æ–°å­¸ç¿’æ–¹å¼ï¼
      </p>
      <p class="subtitle" id="pageSubtitle">é¸æ“‡æ™‚æ®µæªåœ˜ï¼ŒæˆåŠŸæˆåœ˜å¾Œå°‡æ”¶åˆ°LINEé€šçŸ¥ä¸¦é€²è¡Œå ±åä»˜æ¬¾ã€‚</p>
      <p id="updateTime" class="updatetime"></p>
    </div>
    <div class="content">
      <div class="process-section">
        <h2 class="process-title">ğŸ“‹ æªåœ˜æµç¨‹èªªæ˜</h2>
        <div class="process-steps">
          <div class="step"><div class="step-number">1</div><div class="step-content"><h3>é»æ“Šæªåœ˜</h3><p>é€²å…¥LINEå¸³è™Ÿç¶å®š</p></div></div>
          <div class="step"><div class="step-number">2</div><div class="step-content"><h3>æªåœ˜äººæ•¸é”æ¨™</h3><p>ç³»çµ±æ¨æ’­æœ€æ–°ç‹€æ…‹</p></div></div>
          <div class="step"><div class="step-number">3</div><div class="step-content"><h3>æ­£å¼å ±åç¹³è²»</h3><p>åƒåŠ è€…æœƒæ”¶åˆ°Tallyè¡¨å–®/ä»˜æ¬¾é€£çµ</p></div></div>
        </div>
      </div>
      <div id="courseGrid" class="course-grid"></div>
    </div>
  </div>
  <div id="registerModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">åƒåŠ æªåœ˜</div>
      <form id="registerForm">
        <div style="margin-bottom:.8em;text-align:center;color:#112947;font-size:1.00em;">
          <p style="margin:0 0 .45em 0">è«‹å¡«å¯« Emailï¼Œä¸¦é€²è¡ŒLINEå¸³è™Ÿç¶å®š</p>
        </div>
        <div class="modal-form-group">
          <label for="inputEmail" class="modal-form-label">Emailï¼ˆå ±åé€šçŸ¥å°‡å¯„è‡³æ­¤ä¿¡ç®±ï¼‰</label>
          <input id="inputEmail" class="modal-form-input" type="email" maxlength="80" required placeholder="your@email.com" autocomplete="email">
        </div>
        <div class="modal-actions">
          <button type="button" class="modal-btn modal-btn-secondary" id="cancelBtn">å–æ¶ˆ</button>
          <button type="submit" class="modal-btn modal-btn-primary" id="submitBtn">å‰å¾€LINEå¸³è™Ÿç¶å®š</button>
        </div>
      </form>
    </div>
  </div>
  <div id="toast" class="toast"><span id="toastMessage"></span></div>
  <script>
    function updateBannerTime() {
      const now = new Date();
      const yyyy = now.getFullYear();
      const MM = String(now.getMonth() + 1).padStart(2, '0');
      const dd = String(now.getDate()).padStart(2, '0');
      const hh = String(now.getHours()).padStart(2, '0');
      const mm = String(now.getMinutes()).padStart(2, '0');
      document.getElementById('updateTime').textContent = `æœ€å¾Œæ›´æ–°ï¼š${yyyy}/${MM}/${dd}, ${hh}:${mm}`;
    }
    updateBannerTime();

    const coursesData = [
      { id: 'taipei-afternoon', name: 'å¹³æ—¥ä¸‹åˆå ´', time: '14:00-17:00', date: '11/10 (æ—¥)', location: 'å°åŒ—', price: 800, currentCount: 2, minParticipants: 3 },
      { id: 'taipei-evening', name: 'å¹³æ—¥æ™šä¸Šå ´', time: '19:00-22:00', date: '11/12 (äºŒ)', location: 'å°åŒ—', price: 800, currentCount: 4, minParticipants: 3 },
      { id: 'taichung-afternoon', name: 'å‡æ—¥ä¸‹åˆå ´', time: '14:00-17:00', date: '11/15 (å…­)', location: 'å°ä¸­', price: 800, currentCount: 6, minParticipants: 3 }
    ];
    let selectedCourse = null;

    function renderCourses() {
      const grid = document.getElementById('courseGrid');
      grid.innerHTML = '';
      coursesData.forEach(course => {
        const count = course.currentCount || 0;
        const minParticipants = course.minParticipants || 3;
        const isConfirmed = count >= minParticipants;
        const card = document.createElement('div');
        card.className = 'course-card';
        card.innerHTML = `
          <div class="course-time">${course.date}ï½œ${course.time}</div>
          <div class="course-name" style="font-weight:600;color:#112947;margin-bottom: 0.75rem;">
            ${course.location}ï½œ${course.name}
          </div>
          <div class="participant-count">
            <span>ğŸ‘¥ ç›®å‰æªåœ˜ï¼š</span>
            <span class="count-number">${count}</span>
            <span>äºº</span>
          </div>
          <div class="status-badge ${isConfirmed ? 'status-confirmed' : 'status-pending'}">
            ${isConfirmed ? 'âœ“ å·²æˆåœ˜' : `é‚„å·® ${minParticipants - count} äººæˆåœ˜`}
          </div>
          <button class="register-btn">æˆ‘è¦åƒåŠ </button>
        `;
        card.querySelector('.register-btn').addEventListener('click', () => openRegisterModal(course));
        grid.appendChild(card);
      });
    }

    function openRegisterModal(course) {
      selectedCourse = course;
      document.getElementById('registerModal').classList.add('active');
      document.querySelector('.modal-header').textContent = `åƒåŠ æªåœ˜ - ${course.name}`;
      document.body.style.overflow = 'hidden';
      document.getElementById('registerForm').reset();
    }
    function closeRegisterModal() {
      document.getElementById('registerModal').classList.remove('active');
      selectedCourse = null;
      document.querySelector('.modal-header').textContent = 'åƒåŠ æªåœ˜';
      document.body.style.overflow = '';
    }
    document.getElementById('cancelBtn').onclick = closeRegisterModal;
    document.getElementById('registerModal').onclick = function(e) {
      if(e.target === this) closeRegisterModal();
    };

    document.getElementById('registerForm').onsubmit = function(e) {
      e.preventDefault();
      const email = document.getElementById('inputEmail').value.trim();
      if (!email) { showToast('è«‹è¼¸å…¥æœ‰æ•ˆä¿¡ç®±'); return; }
      const url = "https://liff.line.me/2008438447-9Nv7VA8a?course_id=" + (selectedCourse?.id || "") + "&email=" + encodeURIComponent(email);
      window.location.href = url;
      closeRegisterModal();
    };

    function showToast(message,type='success') {
      const toast = document.getElementById('toast');
      document.getElementById('toastMessage').textContent = message;
      toast.className = `toast ${type} active`;
      setTimeout(()=>{toast.className = 'toast';},2600);
    }
    renderCourses();
  </script>
</body>
</html>
